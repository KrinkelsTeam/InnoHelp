<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="ru">
  <head>
    <meta http-equiv="Content-Language" content="ru" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=8" />
    <meta content="Перевод на русский: Сергей Леонов (aka Leserg)" name="description" />
    <title>Секция [Files]</title>
    <!--[if IE 6]><style type="text/css">html{overflow-y:scroll}</style><![endif]-->
    <link rel="stylesheet" type="text/css" href="../css/styles.css" />
    <script type="text/javascript" src="../js/topic.js"></script>
    <script type="text/javascript" src="../js/jquery.js"></script>
    <script type="text/javascript" src="../js/highlight.js"></script>
    <script type="text/javascript">
      $(document).ready(function(){highlight();});
    </script>
  </head>
  <body>
    <h1 class="topicheading">Секция [Files]</h1>
    <div class="topicbody">
      <br />
      <div class="absaz">Эта секция является необязательной и определяет любые
        файлы, которые программа установки должна установить в системе
        пользователя.</div>
      <br />
      <div class="absaz">Пример секции <tt>[Files]</tt>:</div>
      <pre class="indent examplebox"><span class="hl kwa">[Files]</span>
<span class="hl kwb">Source</span>: "CTL3DV2.DLL"; <span class="hl kwb">DestDir</span>: "<span
class="hl kwc">{sys}</span>"; <span class="hl kwb">Flags</span>: <span class="hl kwe">onlyifdoesntexist uninsneveruninstall</span>
<span class="hl kwb">Source</span>: "MYPROG.EXE"; <span class="hl kwb">DestDir</span>: "<span
class="hl kwc">{app}</span>"
<span class="hl kwb">Source</span>: "MYPROG.CHM"; <span class="hl kwb">DestDir</span>: "<span
class="hl kwc">{app}</span>"
<span class="hl kwb">Source</span>: "README.TXT"; <span class="hl kwb">DestDir</span>: "<span
class="hl kwc">{app}</span>"; <span class="hl kwb">Flags</span>: <span class="hl kwe">isreadme</span></pre>
      <div class="absaz">Обязательно ознакомьтесь с <i>Замечаниями</i> в конце
        этого раздела.</div>
      <br />
      <div class="absaz">Ниже приведен список поддерживаемых <a href="topic_params.htm">параметров</a>:</div>
      <br />
      <dl>
        <dt class="paramlist"><b><a name="Source">Source</a></b>  <i>(обязательный)</i></dt>
        <dd class="paramlist">
          <p>Определяет имя <i>исходного файла</i>. Компилятор самостоятельно
            добавит <a href="topic_sourcedirectorynotes.htm">исходный каталог</a>
            размещения файла, если полный путь не указан. </p>
          <p>Допускается одной записью указывать группу файлов, используя
            символы подстановки (маску). В этом случае все файлы,
            соответствующие маске, будут иметь одинаковые опции.</p>
          <p>Если указан флаг <tt>external</tt>, то параметр <tt>Source</tt>
            должен содержать полный путь к существующему файлу (или маске) на
            распространяемом носителе или в системе пользователя (например,
            "{src}\license.ini"). </p>
          <p>Можно использовать константы, но только если указан флаг <tt>external</tt>.
            Это обусловлено тем, что компилятор не выполняет какую-либо
            трансляцию констант самостоятельно. </p>
          <div class="examplebox">
            <div class="exampleheader">Примеры:</div>
            <pre class="nomargin"><span class="hl kwb">Source</span>: "MYPROG.EXE"
<span class="hl kwb">Source</span>: "Files\*"</pre>
          </div>
        </dd>
        <dt class="paramlist"><b><a name="DestDir">DestDir</a></b>  <i>(обязательный)</i></dt>
        <dd class="paramlist">
          <p>Определяет каталог, в который будет установлен файл на системе
            пользователя. Обычно всегда начинается с одной из констант
            каталогов. Если в системе пользователя указанный путь ещё не
            существует, то он будет создан автоматически и автоматически удалён
            в процессе деинсталляции, если окажется пустым.</p>
          <div class="examplebox">
            <div class="exampleheader">Примеры:</div>
            <pre class="nomargin"><span class="hl kwb">DestDir</span>: "<span class="hl kwc">{app}</span>"
<span class="hl kwb">DestDir</span>: "<span class="hl kwc">{app}</span>\subdir"</pre>
          </div>
        </dd>
        <dt class="paramlist"><b><a name="DestName">DestName</a></b></dt>
        <dd class="paramlist">
          <p>Этот параметр определяет новое имя, которое будет присвоено файлу
            после его установки в системе пользователя. По умолчанию программа
            установки использует имя из параметра <tt>Source</tt>, поэтому в
            большинстве случаев применять этот параметр не обязательно. </p>
          <div class="examplebox">
            <div class="exampleheader">Пример:</div>
            <pre class="nomargin"><span class="hl kwb">DestName</span>: "MYPROG2.EXE"</pre>
          </div>
        </dd>
        <dt class="paramlist"><b><a name="Excludes">Excludes</a></b></dt>
        <dd class="paramlist">
          <p>Определяет список файлов/папок по маске для исключения из программы
            установки.Для разделения масок в списке используется запятая. Этот
            параметр нельзя комбинировать с флагом <tt>external</tt>. </p>
          <p>Маски имён могут содержать символы подстановки ("*" и "?").
            Заметьте, что в отличии от параметра <tt>Source</tt>, для <tt>Excludes</tt>
            используется простая, Unix-подобная процедура сопоставления. Точка в
            шаблоне является важным элементом. Так, указание маски "*.*" не
            исключит файлы без расширения (для этого нужно использовать маску
            "*"). Кроме того, знаку вопроса "?" всегда соответствует только один
            символ, таким образом маска вида "?????" не исключит файлы с именами
            длиной менее пяти символов. </p>
          <p>Если маска начинается с обратной косой черты ("\"), она
            сопоставляется с началом имени пути, в противном случае она
            сопоставляется с концом имени пути. Таким образом, маска "\foo"
            исключит только файл с именем "foo" в корневой папке. С другой
            стороны маска "foo" исключит любые файлы с именем "foo", где бы они
            ни находились.</p>
          <p>Маски имён могут содержать символы обратной косой черты. Так маска
            вида "foo\bar" исключит оба каталога, и "foo\bar", и
            "subdir\foo\bar", а маска вида "\foo\bar" - только "foo\bar".</p>
          <div class="examplebox">
            <div class="exampleheader">Примеры:</div>
            <pre class="nomargin"><span class="hl kwb">Source</span>: "*"; <span
class="hl kwb">Excludes</span>: "*.~*"
<span class="hl kwb">Source</span>: "*"; <span class="hl kwb">Excludes</span>: "*.~*,\Temp\*"; <span
class="hl kwb">Flags</span>: <span class="hl kwe">recursesubdirs</span></pre>
          </div>
        </dd>
        <dt class="paramlist"><b><a name="ExternalSize">ExternalSize</a></b></dt>
        <dd class="paramlist">
          <p>Этот параметр должен использоваться вместе с флагом <tt>external</tt>
            и определяет размер внешнего файла в байтах. Если этот параметр не
            указан, программа установки получит размер файла при запуске.
            Рекомендуется использовать прежде всего для файлов, которые могут
            быть недоступны при запуске, например файлы, расположенные на втором
            диске, когда используется <a href="topic_setup_diskspanning.htm">разбивка
              на диски</a>. </p>
          <div class="examplebox">
            <div class="exampleheader">Пример:</div>
            <pre class="nomargin"><span class="hl kwb">ExternalSize</span>: <span
class="hl num">1048576</span>; <span class="hl kwb">Flags</span>: <span class="hl kwe">external</span></pre>
          </div>
        </dd>
        <dt class="paramlist"><b><a name="CopyMode">CopyMode</a></b></dt>
        <dd class="paramlist">
          <p>Во всех новых сценариях использовать этот параметр не нужно. Он
            устарел и, начиная с Inno Setup 3.0.5, заменён флагами:</p>
          <p>
            <tt>CopyMode: normal -&gt; Flags: promptifolder</tt><br />
            <tt>CopyMode: alwaysskipifsameorolder -&gt; </tt>не имеет флага<br />
            <tt>CopyMode: onlyifdoesntexist -&gt; Flags: onlyifdoesntexist</tt><br />
            <tt>CopyMode: alwaysoverwrite -&gt; Flags: ignoreversion</tt><br />
            <tt>CopyMode: dontcopy -&gt; Flags: dontcopy</tt>
          </p>
          <p>Теперь по умолчанию принят режим <tt>CopyMode:
              alwaysskipifsameorolder</tt>. (Ранее по умолчанию использовался
            режим <tt>CopyMode: normal</tt>.) </p>
        </dd>
        <dt class="paramlist"><b><a name="Attribs">Attribs</a></b></dt>
        <dd class="paramlist">
          <p>Определяет дополнительные атрибуты для файла. Может содержать один
            или несколько атрибутов: <tt>readonly</tt> - только для чтения, <tt>hidden</tt>
            - скрытый, <tt>system</tt> - системный, <tt>notcontentindexed</tt>
            - не индексируемый службой поиска. Если этот параметр не указан, то
            программа установки не назначает файлу никаких специальных
            атрибутов. </p>
          <div class="examplebox">
            <div class="exampleheader">Пример:</div>
            <pre class="nomargin"><span class="hl kwb">Attribs</span>: <span class="hl kwe">hidden system</span></pre>
          </div>
        </dd>
        <dt class="paramlist"><b><a name="Permissions">Permissions</a></b></dt>
        <dd class="paramlist">
          <p>Позволяет указать дополнительные разрешения для файла в ACL (<b>A</b>ccess
            <b>C</b>ontrol <b>L</b>ist - <i>список контроля доступа</i>). Не
            рекомендуется использовать этот параметр, если вы не знакомы со
            списками ACL или не понимаете зачем их необходимо изменять, так как
            его неправильное использование может негативно повлиять на
            безопасность системы.</p>
          <p>Для эффективной работы параметра файл должен находиться в разделе,
            который поддерживает ACL (такой как NTFS), а текущий пользователь
            должен иметь возможность изменять разрешения на файл. Если эти
            условия не будут выполнены, разрешения не вступят в силу и сообщение
            об ошибке не будет показано.</p>
          <p>Этот параметр должен использоваться <i>только</i> для файлов
            приложения. Никогда не изменяйте ACL для общих системных файлов,
            иначе безопасность пользовательской системы может оказаться под
            угрозой. </p>
          <p>Указанные разрешения устанавливаются независимо от того,
            существовал ли файл до установки.</p>
          <p>Параметр может содержать один или более значений, разделённых
            пробелами, в следующем формате:</p>
          <div class="indent">
            <p><tt><a href="topic_usergroupids.htm">&lt;идентификатор
                  пользователя или группы&gt;</a>-&lt;тип доступа&gt;</tt></p>
          </div>
          <p>В секции <tt>[Files]</tt> поддерживаются следующие типы доступа:</p>
          <dl>
            <dt class="flaglist"><a name="full">full</a></dt>
            <dd>
              <p>Предоставляет разрешение "Полный доступ", которое совпадает с
                разрешением <tt>modify</tt> (см. ниже), но дополнительно
                позволяет указанному пользователю/группе стать владельцем файла
                и изменить его полномочия. Используйте этот тип как можно реже;
                как правило, <tt>modify</tt> будет достаточно. </p>
            </dd>
            <dt class="flaglist"><a name="modify">modify</a></dt>
            <dd>
              <p>Предоставляет разрешение "Модификация", которое позволяет
                указанному пользователю/группе читать, выполнять, изменять и
                удалять файл.</p>
            </dd>
            <dt class="flaglist"><a name="readexec">readexec</a></dt>
            <dd>
              <p>Предоставляет разрешение "Чтение и выполнение", что позволяет
                указанному пользователю/группе читать и запускать исполняемый
                файл.</p>
            </dd>
          </dl>
          <div class="examplebox">
            <div class="exampleheader">Пример:</div>
            <pre class="nomargin"><span class="hl kwb">Permissions</span>: users-modify</pre>
          </div>
        </dd>
        <dt class="paramlist"><b><a name="FontInstall">FontInstall</a></b></dt>
        <dd class="paramlist">
          <p>Сообщает программе установки, что файл является шрифтом, который
            необходимо установить. Значением этого параметра является имя
            шрифта, заданного в реестре или WIN.INI. Имя шрифта должно совпадать
            с именем, которое отображается при двойном щелчке по файлу шрифта в
            проводнике. Обратите внимание, что программа установки автоматически
            добавит "(TrueType)" в конец имени.</p>
          <p>Если файл не является шрифтом TrueType, в параметре <i>Flags</i>
            необходимо указать флаг <tt>fontisnttruetype</tt>. </p>
          <p>Рекомендуется использовать флаги <tt>onlyifdoesntexist</tt> и <tt>uninsneveruninstall</tt>
            при установке шрифтов в каталог <tt>{autofonts}</tt> . </p>
          <p>Если установка выполняется в режиме <a href="topic_admininstallmode.htm">не
              административной установки</a>, то для успешной установки шрифта
            требуется Windows 10 версии 1803 или выше. </p>
          <p>Для совместимости с Windows 64-бит не следует устанавливать шрифты
            в каталог <tt>{sys}</tt>. В качестве целевого каталога используйте
            константу <tt>{autofonts}</tt>. </p>
          <div class="examplebox">
            <div class="exampleheader">Пример:</div>
            <pre class="nomargin"><span class="hl kwb">Source</span>: "OZHANDIN.TTF"; <span
class="hl kwb">DestDir</span>: "<span class="hl kwc">{autofonts}</span>"; <span
class="hl kwb">FontInstall</span>: "Oz Handicraft BT"; <span class="hl kwb">Flags</span>: <span
class="hl kwe">onlyifdoesntexist uninsneveruninstall</span></pre>
          </div>
        </dd>
        <dt class="paramlist"><b><a name="StrongAssemblyName">StrongAssemblyName</a></b></dt>
        <dd class="paramlist">
          <p>Определяет файл сборки со строгим именем. Используется только
            программой удаления.</p>
          <p>Этот параметр игнорируется, если не указан флаг <tt>gacinstall</tt>.
          </p>
          <div class="examplebox">
            <div class="exampleheader">Пример:</div>
            <pre class="nomargin"><span class="hl kwb">StrongAssemblyName</span>: "MyAssemblyName, Version=<span
class="hl num">1.0.0.0</span>, Culture=neutral, PublicKeyToken=abcdef123456, ProcessorArchitecture=MSIL"</pre>
          </div>
        </dd>
        <dt class="paramlist"><b><a name="Flags">Flags</a></b></dt>
        <dd class="paramlist">
          <p>Этот параметр представляет собой набор дополнительных опций.
            Допускается использовать несколько опций, разделяя их пробелами.
            Поддерживаются следующие опции:</p>
          <dl>
            <dt class="flaglist"><a name="32bit">32bit</a></dt>
            <dd>
              <p>Приводит к сопоставлению константы <tt>{sys}</tt> с
                32-разрядным каталогом System, если используется в параметрах <tt>Source</tt>
                и <tt>DestDir</tt>, флаги <tt>regserver</tt> и <tt>regtypelib</tt>
                обрабатывают файл как 32-разрядный и, наконец, флаг <tt>sharedfile</tt>
                обновляет 32-разрядный раздел реестра SharedDLL. Такое поведение
                используется по умолчанию в <a href="topic_32vs64bitinstalls.htm">32-разрядном
                  режиме установки</a>. </p>
            </dd>
            <dt class="flaglist"><a name="64bit">64bit</a></dt>
            <dd>
              <p>Приводит к сопоставлению константы <tt>{sys}</tt> с
                64-разрядным каталогом System, если используется в параметрах <tt>Source</tt>
                и <tt>DestDir</tt>, флаги <tt>regserver</tt> и <tt>regtypelib</tt>
                обрабатывает файл как 64-разрядный и, наконец, флаг <tt>sharedfile</tt>
                обновляет 64-разрядный раздел реестра SharedDLL. Такое поведение
                используется по умолчанию в <a href="topic_32vs64bitinstalls.htm">64-разрядном
                  режиме установки</a>. </p>
            </dd>
            <dt class="flaglist"><a name="allowunsafefiles">allowunsafefiles</a></dt>
            <dd>
              <p>Отключает автоматическую проверку компилятором <a href="topic_unsafefiles.htm">небезопасных
                  файлов</a>. Настоятельно рекомендуется НЕ использовать этот
                флаг, если не уверены в своих действиях. </p>
            </dd>
            <dt class="flaglist"><a name="comparetimestamp">comparetimestamp</a></dt>
            <dd>
              <p><i>(Не рекомендуется; см. ниже)</i><br />
                Указывает программе установки выполнять сравнение отметок
                времени, если устанавливаемый файл на системе пользователя уже
                существует и соблюдается хотя бы одно из следующих условий:</p>
              <ul>
                <li>Ни существующий файл, ни устанавливаемый файл не содержат
                  сведений о версии.</li>
                <li>Используется флаг <tt>ignoreversion</tt>. </li>
                <li>Флаг <tt>replacesameversion</tt> не используется, а
                  существующий файл и устанавливаемый файл имеют одинаковый
                  номер версии (как указано в информации о версии файлов). </li>
              </ul>
              <p>Если существующий файл имеет более раннюю отметку времени, чем
                устанавливаемый файл, существующий файл будет заменен. Иначе
                замена выполнена не будет.</p>
              <p><i>Не рекомендуется</i> использовать этот флаг, кроме случаев
                крайней необходимости, поскольку с ним связана проблема
                следующего характера. Разделы NTFS хранят отметки времени в
                формате UTC (в отличие от разделов FAT), что приводит к смещению
                локальных временных меток, с которыми по умолчанию работает
                программа Inno Setup, когда пользователь изменяет часовой пояс
                системы, или когда происходит переход на летнее или зимнее
                время. Это может создать неоднозначную ситуацию: выполняется
                замена файлов, когда пользователь не ожидает, что они будут
                заменены, или наоборот, пользователь ожидает замену файлов, но
                она не происходит. </p>
            </dd>
            <dt class="flaglist"><a name="confirmoverwrite">confirmoverwrite</a></dt>
            <dd>
              <p>Формирует для пользователя запрос с подтверждением замены
                существующего файла.</p>
            </dd>
            <dt class="flaglist"><a name="createallsubdirs">createallsubdirs</a></dt>
            <dd>
              <p>По умолчанию компилятор пропускает пустые каталоги, когда
                выполняет рекурсивный обход вложенных каталогов, согласно
                заданной маске файлов в параметре <tt>Source</tt>. Применение
                этого флага инициирует создание таких каталогов во время
                установки (как если бы для их создания была использована секция
                <tt>[Dirs]</tt>). </p>
              <p>Это флаг должен быть объединён с флагом <tt>recursesubdirs</tt>.
              </p>
            </dd>
            <dt class="flaglist"><a name="deleteafterinstall">deleteafterinstall</a></dt>
            <dd>
              <p>Предписывает программе установки выполнить обычную установку
                файла, но затем удалить его после завершения установки (или
                прекращения установки). Это может быть полезно для извлечения
                временных данных, необходимых программе, запускаемой в секции <tt>[Run]</tt>.</p>
              <p>Этот флаг не приведёт к удалению существующих файлов, которые
                не были заменены во время установки.</p>
              <p>Этот флаг не может быть объединён с флагами <tt>isreadme</tt>,
                <tt>regserver</tt>, <tt>regtypelib</tt>, <tt>restartreplace</tt>,
                <tt>sharedfile</tt> или <tt>uninsneveruninstall</tt>. </p>
            </dd>
            <dt class="flaglist"><a name="dontcopy">dontcopy</a></dt>
            <dd>
              <p>Указывает программе установки не копировать файл в систему
                пользователя, а только включить в инсталлятор. Этот флаг
                полезен, если файл обрабатывается исключительно в секции <tt>[Code]</tt>
                и извлекается с помощью функции <a href="topic_isxfunc_extracttemporaryfile.htm">ExtractTemporaryFile</a>.
              </p>
            </dd>
            <dt class="flaglist"><a name="dontverifychecksum">dontverifychecksum</a></dt>
            <dd>
              <p>Запрещает программе установки проверять контрольную сумму файла
                после извлечения. Используйте этот флаг для файлов, которые
                необходимо изменить уже после компиляции программы установки.</p>
              <p>Это флаг должен быть объединён с флагом <tt>nocompression</tt>.
              </p>
            </dd>
            <dt class="flaglist"><a name="external">external</a></dt>
            <dd>
              <p>Этот флаг предписывает программе установки не выполнять
                компиляцию файла, заданного параметром <tt>Source</tt>, а
                вместо этого осуществлять его копирование напрямую из носителя
                информации или из системы пользователя. Дополнительную
                информацию смотрите в описании параметра <tt>Source</tt>. </p>
            </dd>
            <dt class="flaglist"><a name="fontisnttruetype">fontisnttruetype</a></dt>
            <dd>
              <p>Сообщает программе установки, что устанавливаемый файл шрифта,
                указанный в параметре <tt>FontInstall</tt>, <i>не является
                  шрифтом TrueType</i>. </p>
            </dd>
            <dt class="flaglist"><a name="gacinstall">gacinstall</a></dt>
            <dd>
              <p>Предписывает установку файла в глобальный кэш сборок .NET. При
                использовании в сочетании с флагом <tt>sharedfile</tt>, файл
                будет удалён только при достижении нулевого значения счётчика
                ссылок. </p>
              <p>Чтобы удалить файл, деинсталлятор использует строгое имя
                сборки, заданное параметром <tt>StrongAssemblyName</tt>. </p>
              <p>При попытке использования этой константы в системе без .NET
                Framework будет вызвано исключение.</p>
            </dd>
            <dt class="flaglist"><a name="ignoreversion">ignoreversion</a></dt>
            <dd>
              <p>Указывает программе установки не выполнять сравнение версий.
                Замена существующих файлов будет происходить независимо от их
                номера версии.</p>
              <p>Этот флаг следует использовать только для частных файлов вашего
                приложения, но <i>не</i> для общих системных файлов. </p>
            </dd>
            <dt class="flaglist"><a name="isreadme">isreadme</a></dt>
            <dd>
              <p>Сообщает программе установки, что файл является файлом
                "README". Этот флаг может иметь только <i>один</i> файл в
                установке. Когда использован этот флаг, пользователю будет выдан
                запрос на открытие этого файла по завершению установки. При
                утвердительном ответе программа установки откроет его, используя
                программу по умолчанию для данного типа файла. По этой причине
                файл "README" всегда должен иметь расширение .txt, .wri или
                .doc. </p>
              <p>Обратите внимание, что если программа установки должна будет
                перезагрузить компьютер (к примеру, в результате установки файла
                с флагом <tt>restartreplace</tt> или заданного в секции <tt>[Setup]</tt>
                параметра <tt>AlwaysRestart</tt> со значением <tt>yes</tt>),
                то пользователю не будет предоставлена возможность просмотра
                файла "README". </p>
            </dd>
            <dt class="flaglist"><a name="nocompression">nocompression</a></dt>
            <dd>
              <p>Запрещает компилятору выполнять сжатие файла. Используйте этот
                флаг для типов файлов, сжатие которых не принесет существенной
                выгоды в размере инсталлятора (например, изображения в формате
                JPEG, PNG). Это ускорит процесс компиляции и сэкономит несколько
                байт в конечном файле установки.</p>
            </dd>
            <dt class="flaglist"><a name="noencryption">noencryption</a></dt>
            <dd>
              <p>Запрещает компилятору выполнять шифрование файла. Используйте
                этот флаг, если включено шифрование (в секции <tt>[Setup]</tt>
                используется параметр <tt>Encryption</tt>), но вам необходимо
                извлечь файл (например, при помощи функции <a href="topic_isxfunc_extracttemporaryfile.htm">ExtractTemporaryFile</a>
                в секции <tt>[Code]</tt>) прежде, чем пользователь введёт
                правильный пароль. </p>
            </dd>
            <dt class="flaglist"><a name="noregerror">noregerror</a></dt>
            <dd>
              <p>В комбинации с любым из флагов <tt>regserver</tt> или <tt>regtypelib</tt>
                инсталлятор не выдаст сообщение о том, что регистрация не
                состоялась. </p>
            </dd>
            <dt class="flaglist"><a name="onlyifdestfileexists">onlyifdestfileexists</a></dt>
            <dd>
              <p>Файл с этим флагом будет установлен только в том случае, если
                файл с таким же именем в системе пользователя уже существует.
                Этот флаг может быть полезен, если инсталлятор является
                исправлением для уже установленного приложения, и не требуется
                устанавливать файлы, которых у пользователя ещё нет.</p>
            </dd>
            <dt class="flaglist"><a name="onlyifdoesntexist">onlyifdoesntexist</a></dt>
            <dd>
              <p>Файл с этим флагом будет установлен только в том в случае, если
                он в системе пользователя не существует.</p>
            </dd>
            <dt class="flaglist"><a name="overwritereadonly">overwritereadonly</a></dt>
            <dd>
              <p>Предписывает программе установки всегда выполнять замену файла
                с атрибутом "только для чтения". Без этого флага программа
                установки выдаст пользователю запрос на перезапись такого файла.</p>
            </dd>
            <dt class="flaglist"><a name="promptifolder">promptifolder</a></dt>
            <dd>
              <p>По умолчанию, если устанавливаемый файл имеет более раннюю
                версию (или более раннюю отметку времени, если используется флаг
                <tt>comparetimestamp</tt>), чем существующий, то программа
                установки не будет выполнять его замену. (Смотрите <i>Замечания</i>
                в конце данной главы.) При использовании этого флага программа
                установки выдаст пользователю запрос на его замену, но по
                умолчанию будет предложено оставить существующий файл. </p>
            </dd>
            <dt class="flaglist"><a name="recursesubdirs">recursesubdirs</a></dt>
            <dd>
              <p>Указывает компилятору или программе установки выполнять поиск
                заданного в <tt>Source</tt> имени файла/маски также в
                подкаталогах папки <tt>Source</tt>. </p>
            </dd>
            <dt class="flaglist"><a name="regserver">regserver</a></dt>
            <dd>
              <p>Выполняет регистрацию DLL/OCX файла. При указании флага
                программа установки вызовет функцию DllRegisterServer,
                экспортируемую DLL/OCX файлом, а перед удалением файла программа
                деинсталляции вызовет функцию DllUnregisterServer, которая
                отменит его регистрацию. При использовании этого флага в
                комбинации с флагом <tt>sharedfile</tt> регистрация DLL/OCX
                файла будет отменена только тогда, когда счётчик ссылок общего
                доступа достигнет нуля. </p>
              <p>В <a href="topic_32vs64bitinstalls.htm">64-разрядном режиме
                  установки</a> предполагается, что файл является 64-разрядным и
                его регистрация будет выполнена 64-разрядным процессом. Это
                можно переопределить, указав флаг <tt>32bit</tt>. </p>
              <p>Для получения дополнительных сведений см. <i>замечания</i> в
                конце страницы. </p>
            </dd>
            <dt class="flaglist"><a name="regtypelib">regtypelib</a></dt>
            <dd>
              <p>Выполняет регистрацию библиотеки типов (.tlb). При удалении
                файла программа деинсталляции выполнит отмену регистрации
                библиотеки типов (если только не указан флаг <tt>uninsneveruninstall</tt>).
                По аналогии с флагом <tt>regserver</tt>, при использовании в
                комбинации с флагом <tt>sharedfile</tt> регистрация файла будет
                отменена только тогда, когда счётчик ссылок общего доступа
                достигнет нуля. </p>
              <p>В <a href="topic_32vs64bitinstalls.htm">64-разрядном режиме
                  установки</a> и запуске на 64-разрядной редакции Windows
                регистрация библиотеки типов будет выполнена 64-разрядным
                процессом. Это можно переопределить, указав флаг <tt>32bit</tt>.
              </p>
              <p>Регистрация библиотеки типов в 64-разрядной архитектуре Itanium
                не поддерживается.</p>
              <p>Для получения дополнительных сведений см. <i>замечания</i> в
                конце страницы. </p>
            </dd>
            <dt class="flaglist"><a name="replacesameversion">replacesameversion</a></dt>
            <dd>
              <p>Предписывает программе установки выполнить замену существующего
                файла той же версии, что и устанавливаемый файл, если их
                содержание различается.</p>
              <p>По умолчанию, если этот флаг не используется, замена
                существующего файла той же версии выполнена не будет.</p>
            </dd>
            <dt class="flaglist"><a name="restartreplace">restartreplace</a></dt>
            <dd>
              <p>Если во время установки необходимо заменить существующий файл,
                но он в это время используется другим процессом (заблокирован),
                то программа установки выведет сообщение об ошибке. Вместо этого
                данный флаг сообщает программе установки зарегистрировать файл
                для замены при следующем перезапуске системы (путём вызова
                MoveFileEx или созданием записи в WININIT.INI). В случае
                возникновения такой ситуации, по окончании установки
                пользователю будет предложено перезагрузить компьютер.</p>
              <p><b>ПРИМЕЧАНИЕ:</b> Если пользователь не имеет прав
                администратора, этот флаг не учитывается. Поэтому при его
                использовании рекомендуется для директивы <a href="topic_setup_privilegesrequired.htm">PrivilegesRequired</a>
                в секции <tt>[Setup]</tt> оставить значение <tt>admin</tt>.</p>
            </dd>
            <dt class="flaglist"><a name="setntfscompression">setntfscompression</a></dt>
            <dd>
              <p>Указывает программе установки включить для файла сжатие NTFS
                (даже если файл не был заменен). Если по какой-либо причине не
                удаётся установить состояние сжатия (например, если сжатие не
                поддерживается файловой системой), сообщение об ошибке не
                выводится.</p>
            </dd>
            <dt class="flaglist"><a name="sharedfile">sharedfile</a></dt>
            <dd>
              <p>Сообщает программе установки, что файл является общим для
                нескольких приложений, и может быть удалён, если другие
                приложения больше его не используют. Большинству файлов,
                устанавливаемых в системный каталог Windows, необходимо
                указывать этот флаг, в том числе .OCX, .BPL и .DPL файлам.</p>
              <p>Для отслеживания числа приложений, которые зависят от файла, в
                Windows используется стандартный механизм подсчёта ссылок общих
                файлов (находится в реестре по пути
                HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\SharedDLLs).
                Каждый раз при установке общего файла счётчик ссылок
                увеличивается на единицу. (Это происходит независимо от того,
                действительно ли программа установки производит замену файла на
                диске.) При удалении приложения, использующего файл, счётчик
                ссылок автоматически уменьшается. Когда счётчик ссылок достигнет
                нулевого значения, выполняется удаление файла (если также указан
                флаг <tt>uninsnosharedfileprompt</tt>, иначе только с
                разрешения пользователя). </p>
              <p>Если программа установки запускается более одного раза, то на
                такое же количество раз будет увеличен счётчик ссылок общего
                доступа для данного файла. При удалении приложения счётчик
                ссылок будет уменьшен на значение, которое соответствует числу
                установок, поэтому пропуска в ссылках не будет (при условии, что
                у директивы <a href="topic_setup_uninstalllogmode.htm">UninstallLogMode</a>
                в секции <tt>[Setup]</tt> не было изменено заданное по
                умолчанию значение <tt>append</tt>). </p>
              <p>При использовании этого флага никогда не указывайте константу <tt>{syswow64}</tt>
                в параметре <tt>DestDir</tt>; вместо неё всегда используйте <tt>{sys}</tt>.
                Даже несмотря на то, что <tt>{sys}</tt> и <tt>{syswow64}</tt>
                соответствуют одному и тому же каталогу в <a href="topic_32vs64bitinstalls.htm">32-разрядном
                  режиме установки</a>. Путь всегда должен точно соответствовать
                тому, который использует другая существующая программа
                установки, иначе будет создан второй счётчик ссылок, что может
                привести к преждевременному удалению файла. Если необходимо
                установить общий файл в 32-разрядный системный каталог в <a href="topic_32vs64bitinstalls.htm">64-разрядном
                  режиме установки</a>, укажите константу <tt>{sys}</tt> в
                параметре <tt>DestDir</tt> и дополнительно включите флаг <tt>32bit</tt>.
              </p>
            </dd>
            <dt class="flaglist"><a name="sign">sign</a></dt>
            <dd>
              <p>Этот флаг указывает компилятору выполнить цифровую подпись
                исходных файлов прежде, чем они будут добавлены в пакет
                установки. Не учитывается, если параметр <a href="topic_setup_signtool.htm">SignTool</a>
                в секции <tt>[Setup]</tt> не установлен. </p>
            </dd>
            <dt class="flaglist"><a name="signonce">signonce</a></dt>
            <dd>
              <p>Этот флаг указывает компилятору выполнить цифровую подпись
                исходных файлов прежде, чем они будут добавлены в пакет
                установки, но при условии, что они ещё не подписаны. Не
                учитывается, если параметр <a href="topic_setup_signtool.htm">SignTool</a>
                в секции <tt>[Setup]</tt> не установлен. </p>
            </dd>
            <dt class="flaglist"><a name="skipifsourcedoesntexist">skipifsourcedoesntexist</a></dt>
            <dd>
              <p>Предписывает компилятору — или программе установки, если также
                используется флаг <tt>external</tt> — молча пропустить запись,
                если файл не существует, вместо вывода сообщения об ошибке. </p>
            </dd>
            <dt class="flaglist"><a name="solidbreak">solidbreak</a></dt>
            <dd>
              <p>Если включен параметр <a href="topic_setup_solidcompression.htm">непрерывного
                  сжатия</a>, то этот флаг указывает компилятору завершить
                сжатие текущего потока и начать сжатие нового, без учёта
                соответствующего <tt>Source</tt> файла. Это позволяет программе
                установки мгновенно выполнить поиск и извлечение такого файла
                без распаковки предыдущих файлов. Использование этого флага
                может быть полезным в сложных, многокомпонентных инсталляторах,
                когда много времени уходит на распаковку компонентов, установка
                которых не выбрана. </p>
            </dd>
            <dt class="flaglist"><a name="sortfilesbyextension">sortfilesbyextension</a></dt>
            <dd>
              <p>Этот флаг указывает компилятору выполнить сжатие
                отсортированных по расширению файлов прежде, чем они будут
                отсортированы по именам путей. Это позволяет также уменьшить
                размер программы установки, если используется <a href="topic_setup_solidcompression.htm">непрерывное
                  сжатие</a>. </p>
            </dd>
            <dt class="flaglist"><a name="sortfilesbyname">sortfilesbyname</a></dt>
            <dd>
              <p>Этот флаг указывает компилятору выполнить сжатие
                отсортированных по имени файлов прежде, чем они будут
                отсортированы по именам путей. Это позволяет также уменьшить
                размер программы установки, если используется <a href="topic_setup_solidcompression.htm">непрерывное
                  сжатие</a>. Если ещё применяется флаг <tt>sortfilesbyextension</tt>,
                то сначала файлы сортируются по расширению. </p>
            </dd>
            <dt class="flaglist"><a name="touch">touch</a></dt>
            <dd>
              <p>Предписывает программе установки задать установленным файлам
                отметку времени, указанную в параметрах <a href="topic_setup_touchdate.htm">TouchDate</a>
                и <a href="topic_setup_touchtime.htm">TouchTime</a> секции <tt>[Setup]</tt>.
              </p>
              <p>В комбинации с флагом <tt>external</tt> этот флаг не
                учитывается. </p>
            </dd>
            <dt class="flaglist"><a name="uninsnosharedfileprompt">uninsnosharedfileprompt</a></dt>
            <dd>
              <p>Выполняет отключение подтверждения на удаление общего файла,
                если счётчик ссылок общего доступа достиг нуля. Этот флаг должен
                использоваться совместно с флагом <tt>sharedfile</tt>. </p>
            </dd>
            <dt class="flaglist"><a name="uninsremovereadonly">uninsremovereadonly</a></dt>
            <dd>
              <p>Указывает программе деинсталляции перед попыткой удалением
                файла выполнить в нём отключение атрибута "только-для-чтения".</p>
            </dd>
            <dt class="flaglist"><a name="uninsrestartdelete">uninsrestartdelete</a></dt>
            <dd>
              <p>Предписывает программе деинсталляции выполнить удаление
                заблокированного файла после перезагрузки системы. В случае
                возникновения такой ситуации, по окончании деинсталляции
                пользователю будет предложено перезагрузить компьютер. Этот флаг
                может быть полезен, если, к примеру, необходимо удалить
                расширения оболочки, которые не могут быть остановлены
                программными средствами. Обратите внимание, что для успешной
                работы этого флага требуются права администратора.</p>
            </dd>
            <dt class="flaglist"><a name="uninsneveruninstall">uninsneveruninstall</a></dt>
            <dd>
              <p>Запрещает программе деинсталляции выполнять удаление файла. Это
                флаг может быть полезен при установке очень распространенных
                общих файлов, которые не следует удалять ни при каких
                обстоятельствах, например, таких как библиотеки MFC.</p>
              <p>Обратите внимание, что при использовании вместе с флагом <tt>sharedfile</tt>,
                файл не будет удалён, но счётчик ссылок всё равно будет
                уменьшен. </p>
            </dd>
            <dt class="flaglist"><a name="unsetntfscompression">unsetntfscompression</a></dt>
            <dd>
              <p>Указывает программе установки отключить для файла сжатие NTFS
                (даже если файл не был заменен). Если по какой-либо причине не
                удаётся установить состояние сжатия (например, если сжатие не
                поддерживается файловой системой), сообщение об ошибке не
                выводится.</p>
            </dd>
          </dl>
          <div class="examplebox">
            <div class="exampleheader">Пример:</div>
            <pre class="nomargin"><span class="hl kwb">Flags</span>: <span class="hl kwe">isreadme</span></pre>
          </div>
        </dd>
      </dl>
      <p><b><a href="topic_componentstasksparams.htm">Параметры секций
            [Components] и [Tasks]</a></b></p>
      <p><b><a href="topic_commonparams.htm">Общие параметры</a></b></p>
      <h2 class="heading">Замечания:</h2>
      <br />
      <div class="absaz">Если файл в системе пользователя уже существует, по
        умолчанию его замена будет выполнена в соответствии со следующими
        правилами:</div>
      <br />
      <ol>
        <li>Если существующий файл имеет более старую версию, чем
          устанавливаемый файл (в соответствии с информацией о версии файлов),
          существующий файл будет заменён.</li>
        <li>Если существующий файл имеет ту же версию, что и устанавливаемый, он
          не будет заменён, за исключением случаев, когда используется флаг <tt>replacesameversion</tt>
          и содержание этих файлов отличается. </li>
        <li>Если существующий файл имеет более новую версию, чем
          устанавливаемый, или если существующий файл имеет информацию о версии,
          а устанавливаемый файл нет, существующий файл не будет заменён.</li>
        <li>Если существующий файл не имеет информации о версии, он будет
          заменён.</li>
      </ol>
      <br />
      <div class="absaz">Некоторые флаги, такие как <tt>onlyifdoesntexist</tt>,
        <tt>ignoreversion</tt> и <tt>promptifolder</tt>, изменяют
        вышеупомянутые правила.</div>
      <br />
      <div class="absaz">Если программа установки не может заменить существующий
        файл, поскольку он используется другим процессом, она предпримет до 4
        дополнительных попыток замены (с интервалом в одну секунду). Если все
        попытки окажутся неудачными, будет показано сообщение об ошибке.</div>
      <br />
      <div class="absaz">Все файлы с флагами <tt>regserver</tt> или <tt>regtypelib</tt>
        программа установки регистрирует на последнем этапе инсталляции. Однако,
        если в секции <tt>[Setup]</tt> для директивы <tt>AlwaysRestart</tt>
        задано значение <tt>yes</tt>, или если имеются файлы с флагом <tt>restartreplace</tt>,
        все эти файлы будут зарегистрированы при следующей перезагрузке системы
        (путём создания соответствующих записей в ключе <i>RunOnce</i> реестра
        Windows).</div>
      <br />
      <div class="absaz">При удалении файлов с расширением .HLP (файлы помощи
        Windows), автоматически удаляются все связанные с ними файлы .GID и
        .FTS. Аналогично с файлами .CHM (файлы справки HTML) – при их удалении
        также автоматически удаляются связанные файлы .CHW (файлы индексации).</div>
      <br />
    </div>
  </body>
</html>
